(this.webpackJsonptask_tracker=this.webpackJsonptask_tracker||[]).push([[0],{38:function(e,t,a){e.exports=a(66)},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),s=a(11),u=a(5),o=a(16),i=function(e){return{type:"GET_DATA",payload:e}},m=function(e){return{type:"GET_USER",payload:e}},p=a(14),E=a.n(p),d=function(e,t,a,n,r){E.a.get("https://uxcandy.com/~shapoval/test-task-backend/v2/?developer=".concat("NKatk","&sort_field=").concat(a,"&sort_direction=").concat(n,"&page=").concat(r)).then((function(t){"ok"===t.data.status&&e(t.data.message)})).catch((function(){return{success:!1,error:{}}})),localStorage.getItem("token")&&t(!0)},f=Object(s.b)((function(e){return{page:e.page.page,sort:e.sort,user:e.user.user}}),(function(e){return{getData:function(t){return e(i(t))},getUser:function(t){return e(m(t))}}}))((function(e){var t=e.sort,a=e.page,c=e.getUser,l=e.getData;return Object(n.useEffect)((function(){"/"!==window.location.pathname&&d(l,c,t.sortField,t.sortDirection,a)}),[]),r.a.createElement("div",null,null)})),b=function(e){return{type:"SORT_LIST",payload:e}},g=function(e){return{type:"CHOICE_PAGE",payload:e}},v=a(67),h=a(68),k=a(69),y=function(e){localStorage.setItem("token",""),e(!1)},O=function(e){var t=e.user,a=e.getUser;return r.a.createElement("div",{className:"head-tasks"},r.a.createElement(u.b,{to:"/createchange"},r.a.createElement(v.a,null)),r.a.createElement("h1",null,"BeeJee Tasks"),t?r.a.createElement(h.a,{onClick:function(){return y(a)}}):r.a.createElement(u.b,{to:"/login"},r.a.createElement(k.a,null)))},j=a(70),N=a(71),x=a(72),S=a(73),w=function(e,t){return e.sortField===t?{sortField:t,sortDirection:"asc"===e.sortDirection?"desc":"asc"}:{sortField:t,sortDirection:"asc"}},T=function(e){var t=e.sort,a=e.user,n=e.sortList;return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"user-col"},r.a.createElement("button",{type:"button",onClick:function(){return n(w(t,"username"))},className:"username"===t.sortField?"active-button":null},r.a.createElement("span",null,"Name"),"username"===t.sortField&&("asc"===t.sortDirection?r.a.createElement(j.a,null):r.a.createElement(N.a,null)))),r.a.createElement("th",{className:"email-col"},r.a.createElement("button",{type:"button",onClick:function(){return n(w(t,"email"))},className:"email"===t.sortField?"active-button":null},r.a.createElement("span",null,"Email"),"email"===t.sortField&&("asc"===t.sortDirection?r.a.createElement(j.a,null):r.a.createElement(N.a,null)))),r.a.createElement("th",{className:"text-col"},"Task"),r.a.createElement("th",{className:"status-col"},r.a.createElement("button",{type:"button",onClick:function(){return n(w(t,"status"))},className:"status"===t.sortField?"active-button":null},r.a.createElement("span",null,"Status"),"status"===t.sortField&&("asc"===t.sortDirection?r.a.createElement(x.a,null):r.a.createElement(S.a,null)))),a?r.a.createElement("th",{className:"admin-col"},null):null))},F=a(74),D=a(75),C=function(e){if(!localStorage.getItem("changeTask"))return!1;var t=JSON.parse(localStorage.getItem("changeTask"));return!!Array.isArray(t)&&-1!==t.indexOf(e)},U=function(e){var t=e.tasks,a=e.user;return r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"user-col"},e.username),r.a.createElement("td",{className:"email-col"},e.email),r.a.createElement("td",{className:"text-col"},e.text,C(e.id)&&r.a.createElement("p",{className:"text-info-change"},r.a.createElement(F.a,null),r.a.createElement("i",null,"Edited by administrator"))),r.a.createElement("td",{className:"status-col"},e.status?r.a.createElement(S.a,null):r.a.createElement(x.a,null)),a?r.a.createElement("td",{className:"admin-col"},r.a.createElement(u.b,{to:"/createchange/".concat(e.id)},r.a.createElement(D.a,null))):null)})))},I=function(e){var t=e.page,a=e.totalTaskCount,n=e.choicePage,c=[];if(a>3)for(var l=0;a>3*l;l++)c.push(l+1);return r.a.createElement("div",{className:"buttons-page"},c.map((function(e){return e>=t-1&&e<=t+1?r.a.createElement("button",{type:"button",className:e===t?"active-page":null,onClick:function(){return n(e)},key:e},r.a.createElement("span",null,e)):e>=t-2&&1!==e&&e<=t+2&&e!==c.length?r.a.createElement("span",{className:"dots",key:e},"..."):1===e||e===c.length?r.a.createElement("button",{type:"button",className:e===t?"active-page":null,onClick:function(){return n(e)},key:e},r.a.createElement("span",null,e)):null})))},_=function(e){var t=e.sort,a=e.page,n=e.tasks,c=e.user,l=e.sortList,s=e.choicePage,u=e.getUser;return r.a.createElement("div",{className:"list-task"},r.a.createElement(O,{user:c,getUser:u}),!!n.tasks.length&&r.a.createElement("div",{className:"table-task"},r.a.createElement("table",null,r.a.createElement(T,{sort:t,user:c,sortList:l}),r.a.createElement(U,{tasks:n.tasks,user:c})),r.a.createElement(I,{page:a,totalTaskCount:n.totalTaskCount,choicePage:s})))},A=Object(s.b)((function(e){return{page:e.page.page,sort:e.sort,tasks:e.tasks,user:e.user.user}}),(function(e){return{choicePage:function(t){return e(g(t))},sortList:function(t){return e(b(t))},getData:function(t){return e(i(t))},getUser:function(t){return e(m(t))}}}))((function(e){var t=e.page,a=e.sort,c=e.tasks,l=e.user,s=e.choicePage,u=e.sortList,o=e.getData,i=e.getUser;return Object(n.useEffect)((function(){d(o,i,a.sortField,a.sortDirection,t)}),[o,i,a.sortField,a.sortDirection,t]),r.a.createElement("div",null,r.a.createElement(_,{page:t,sort:a,tasks:c,user:l,choicePage:s,sortList:u,getUser:i}))})),P=a(4),L=a.n(P),J=a(9),G=a(3),K=a(76),R=function(){var e=Object(J.a)(L.a.mark((function e(t,a,n){var r,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(r=new FormData).append("username",a),r.append("password",n),e.prev=4,e.next=7,E.a.post("https://uxcandy.com/~shapoval/test-task-backend/v2/login?developer=".concat("NKatk"),r);case 7:if("ok"!==(c=e.sent).data.status){e.next=11;break}return localStorage.setItem("token",c.data.message.token),e.abrupt("return",{success:!0,error:{}});case 11:return e.abrupt("return",{success:!1,error:c.data.message});case 14:return e.prev=14,e.t0=e.catch(4),e.abrupt("return",{success:!1,error:{}});case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t,a,n){return e.apply(this,arguments)}}(),H=function(e){var t=e.user,a=e.getUser,c=Object(n.useState)(!1),l=Object(G.a)(c,2),s=l[0],i=l[1],m=Object(n.useState)({}),p=Object(G.a)(m,2),E=p[0],d=p[1],f=Object(n.useState)(!1),b=Object(G.a)(f,2),g=b[0],v=b[1],h=Object(n.useState)(""),k=Object(G.a)(h,2),y=k[0],O=k[1],j=Object(n.useState)(""),N=Object(G.a)(j,2),x=N[0],S=N[1];g&&setTimeout((function(){a(!0)}),1500);var w=function(){var e=Object(J.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,R(t,y,x);case 3:a=e.sent,v(a.success),d(a.error),Object.keys(a.error).length&&i(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return localStorage.getItem("token")&&t?r.a.createElement(o.a,{to:"/"}):r.a.createElement("div",{className:"login-block"},r.a.createElement("div",{className:"link-block"},r.a.createElement(u.b,{to:"/"},r.a.createElement(K.a,null))),r.a.createElement("form",{className:"form-block",onSubmit:w},g&&r.a.createElement("i",{className:"message-info info-success"},"Login successfully!"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Name"),r.a.createElement("br",null),r.a.createElement("input",{id:"username",onChange:function(e){return O(e.target.value)},type:"text"}),r.a.createElement("br",null),E.username&&r.a.createElement("i",{className:"message-info info-error"},E.username)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("br",null),r.a.createElement("input",{id:"password",onChange:function(e){return S(e.target.value)},type:"password"}),r.a.createElement("br",null),E.password&&r.a.createElement("i",{className:"message-info info-error"},E.password)),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",disabled:s},r.a.createElement("span",null,"Enter")))))},V=Object(s.b)((function(e){return{user:e.user.user}}),(function(e){return{getUser:function(t){return e(m(t))}}}))((function(e){var t=e.user,a=e.getUser;return r.a.createElement("div",null,r.a.createElement(H,{user:t,getUser:a}))})),B=a(77),q=function(){return r.a.createElement("div",{className:"page-not-found"},r.a.createElement(u.b,{to:"/"},"Home"),r.a.createElement("div",null,r.a.createElement(B.a,null)),r.a.createElement("div",null,r.a.createElement("span",null,"Page not found!")))},z=function(e,t){return t.find((function(t){return+t.id===+e}))},M=function(){var e=Object(J.a)(L.a.mark((function e(t,a,n,r){var c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(c=new FormData).append("username",a),c.append("email",n),c.append("text",r),e.abrupt("return",E.a.post("https://uxcandy.com/~shapoval/test-task-backend/v2/create?developer=".concat("NKatk"),c).then((function(e){return"ok"===e.data.status?{success:!0,error:{}}:{success:!1,error:e.data.message}})).catch((function(){return{success:!1,error:{}}})));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),Q=function(e){var t=e.history,a=Object(n.useState)(!1),c=Object(G.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(!1),i=Object(G.a)(o,2),m=i[0],p=i[1],E=Object(n.useState)(""),d=Object(G.a)(E,2),f=d[0],b=d[1],g=Object(n.useState)(""),v=Object(G.a)(g,2),h=v[0],k=v[1],y=Object(n.useState)(""),O=Object(G.a)(y,2),j=O[0],N=O[1],x=Object(n.useState)({}),S=Object(G.a)(x,2),w=S[0],T=S[1],F=function(){var e=Object(J.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,M(t,f,h,j);case 3:a=e.sent,p(a.success),T(a.error),Object.keys(a.error).length&&s(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m&&setTimeout((function(){t.push("/")}),1500),r.a.createElement("div",{className:"create-block"},r.a.createElement("div",{className:"link-block"},r.a.createElement(u.b,{to:"/"},r.a.createElement(K.a,null))),r.a.createElement("form",{className:"form-block",onSubmit:F},m&&r.a.createElement("i",{className:"message-info info-success"},"Saved successfully!"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Name"),r.a.createElement("br",null),r.a.createElement("input",{id:"username",onChange:function(e){return b(e.target.value)},type:"text"}),r.a.createElement("br",null),w.username&&r.a.createElement("i",{className:"message-info info-error"},w.username)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("br",null),r.a.createElement("input",{id:"email",onChange:function(e){return k(e.target.value)},type:"text"}),r.a.createElement("br",null),w.email&&r.a.createElement("i",{className:"message-info info-error"},w.email)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"text"},"Task"),r.a.createElement("br",null),r.a.createElement("textarea",{id:"text",onChange:function(e){return N(e.target.value)},type:"text"}),r.a.createElement("br",null),w.text&&r.a.createElement("i",{className:"message-info info-error"},w.text)),r.a.createElement("button",{type:"submit",disabled:l},r.a.createElement("span",null,"Save"))))},W=a(78),X=a(79),Y=function(){var e=Object(J.a)(L.a.mark((function e(t,a,n,r){var c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(c=new FormData).append("text",a),c.append("status",n?10:0),c.append("token",localStorage.getItem("token")),e.abrupt("return",E.a.post("https://uxcandy.com/~shapoval/test-task-backend/v2/edit/".concat(r,"?developer=").concat("NKatk"),c).then((function(e){return"ok"===e.data.status?{success:!0,error:{}}:{success:!1,error:e.data.message}})).catch((function(){return{success:!1,error:{}}})));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),Z=function(e){var t=e.history,a=e.task,c=e.getUser,l=Object(n.useState)(!1),s=Object(G.a)(l,2),o=s[0],i=s[1],m=Object(n.useState)(!1),p=Object(G.a)(m,2),E=p[0],d=p[1],f=Object(n.useState)({}),b=Object(G.a)(f,2),g=b[0],v=b[1],h=Object(n.useState)(a.text),k=Object(G.a)(h,2),y=k[0],O=k[1],j=Object(n.useState)(!!a.status),N=Object(G.a)(j,2),x=N[0],S=N[1],w=function(){var e=Object(J.a)(L.a.mark((function e(t){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,Y(t,y,x,a.id);case 3:n=e.sent,d(n.success),v(n.error),Object.keys(n.error).length&&i(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(E){if(a.text!==y&&""!==y){var T=Array.isArray(JSON.parse(localStorage.getItem("changeTask")))?JSON.parse(localStorage.getItem("changeTask")):[];C(a.id)||(T.push(a.id),localStorage.setItem("changeTask",JSON.stringify(T)))}setTimeout((function(){t.push("/")}),1500)}return g.token&&setTimeout((function(){localStorage.setItem("token",""),c(!1),t.push("/login")}),0),r.a.createElement("div",{className:"change-block"},r.a.createElement("div",{className:"link-block"},r.a.createElement(u.b,{to:"/"},r.a.createElement(K.a,null))),r.a.createElement("form",{className:"form-block",onSubmit:w},E&&r.a.createElement("i",{className:"message-info info-success"},"Saved successfully!"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Name"),r.a.createElement("br",null),r.a.createElement("input",{id:"username",type:"text",defaultValue:a.username,disabled:!0}),r.a.createElement("br",null)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("br",null),r.a.createElement("input",{id:"email",type:"text",defaultValue:a.email,disabled:!0}),r.a.createElement("br",null)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"text"},"Task"),r.a.createElement("br",null),r.a.createElement("textarea",{id:"text",onChange:function(e){return O(e.target.value)},type:"text",defaultValue:y}),r.a.createElement("br",null),g.text&&r.a.createElement("i",{className:"message-info info-error"},g.text)),r.a.createElement("div",{className:"checkbox"},r.a.createElement("label",{htmlFor:"status"},"Status"),r.a.createElement("div",null,x?r.a.createElement(W.a,{onClick:function(){return S(!1)}}):r.a.createElement(X.a,{onClick:function(){return S(!0)}}))),r.a.createElement("button",{type:"submit",disabled:o},r.a.createElement("span",null,"Save"))))},$=function(e){var t=e.history,a=e.match,n=e.tasks,c=e.user,l=e.getUser;if(a.params.id){if(a.params.id&&n.tasks.length){if(c){var s=z(a.params.id,n.tasks);return s?r.a.createElement(Z,{history:t,task:s,getUser:l}):r.a.createElement(q,null)}return r.a.createElement(o.a,{to:"/login"})}return r.a.createElement("div",null," ")}return r.a.createElement(Q,{history:t})},ee=Object(s.b)((function(e){return{tasks:e.tasks,user:e.user.user}}),(function(e){return{getUser:function(t){return e(m(t))}}}))((function(e){var t=e.history,a=e.match,n=e.tasks,c=e.user,l=e.getUser;return r.a.createElement("div",null,r.a.createElement($,{history:t,match:a,tasks:n,user:c,getUser:l}))})),te=function(){return r.a.createElement(u.a,null,r.a.createElement(f,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",component:A}),r.a.createElement(o.b,{exact:!0,path:"/login",component:V}),r.a.createElement(o.b,{exact:!0,path:"/createchange/:id?",component:ee}),r.a.createElement(o.b,{path:"/*",component:q})))},ae=a(18),ne=a(15),re={page:1},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHOICE_PAGE":return Object(ne.a)({},e,{page:t.payload});default:return e}},le={sortField:"username",sortDirection:"asc"},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SORT_LIST":return Object(ne.a)({},e,{sortField:t.payload.sortField,sortDirection:t.payload.sortDirection});default:return e}},ue={tasks:[],totalTaskCount:0},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DATA":return Object(ne.a)({},e,{tasks:t.payload.tasks,totalTaskCount:t.payload.total_task_count});default:return e}},ie={user:!1},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return Object(ne.a)({},e,{user:t.payload});default:return e}},pe=Object(ae.b)({page:ce,sort:se,tasks:oe,user:me}),Ee=Object(ae.c)(pe);a(65);l.a.render(r.a.createElement(s.a,{store:Ee},r.a.createElement(te,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.0e20270b.chunk.js.map